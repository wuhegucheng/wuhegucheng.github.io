<?xml version="1.0"?>
<rss version="2.0">
    <channel>
        <title>今天也请继续加油 • Posts by &#34;linux&#34; category</title>
        <link>http://wuhegucheng.github.io</link>
        <description></description>
        <language>zh-CN</language>
        <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
        <lastBuildDate>Sat, 01 Apr 2023 16:46:15 +0800</lastBuildDate>
        <category>虚拟机</category>
        <category>markdown</category>
        <category>NFS</category>
        <category>rsync</category>
        <category>ssh</category>
        <category>http</category>
        <item>
            <guid isPermalink="true">http://wuhegucheng.github.io/2023/04/01/linux/base/02.CentOS%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/%E8%99%9A%E6%8B%9F%E6%9C%BA/</guid>
            <title>VMware虚拟机</title>
            <link>http://wuhegucheng.github.io/2023/04/01/linux/base/02.CentOS%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85/%E8%99%9A%E6%8B%9F%E6%9C%BA/</link>
            <category>虚拟机</category>
            <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;虚拟机的安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#虚拟机的安装&#34;&gt;#&lt;/a&gt; 虚拟机的安装&lt;/h1&gt;
&lt;h2 id=&#34;虚拟机典型推荐安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#虚拟机典型推荐安装&#34;&gt;#&lt;/a&gt; 虚拟机典型推荐安装&lt;/h2&gt;
&lt;h3 id=&#34;机选择典型推荐点击下一步&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#机选择典型推荐点击下一步&#34;&gt;#&lt;/a&gt; 机，选择典型推荐，点击下一步&lt;/h3&gt;
&lt;h3 id=&#34;2-选择稍后安装操作系统点击下一步&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#2-选择稍后安装操作系统点击下一步&#34;&gt;#&lt;/a&gt; 2 选择稍后安装操作系统，点击下一步&lt;/h3&gt;
&lt;h3 id=&#34;3-客户操作系统选择-linux版本选择centos7-64位点击下一步&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#3-客户操作系统选择-linux版本选择centos7-64位点击下一步&#34;&gt;#&lt;/a&gt; 3 客户操作系统选择 linux，版本选择 centOS7 64 位，点击下一步&lt;/h3&gt;
&lt;h3 id=&#34;4-修改虚拟机名称修改安装位置点击下一步&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#4-修改虚拟机名称修改安装位置点击下一步&#34;&gt;#&lt;/a&gt; 4 修改虚拟机名称，修改安装位置，点击下一步&lt;/h3&gt;
&lt;h3 id=&#34;封成多个文件点击下一步&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#封成多个文件点击下一步&#34;&gt;#&lt;/a&gt; 封成多个文件，点击下一步&lt;/h3&gt;
&lt;h3 id=&#34;6-点击完成安装虚拟机&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#6-点击完成安装虚拟机&#34;&gt;#&lt;/a&gt; 6 点击完成安装虚拟机&lt;/h3&gt;
&lt;h3 id=&#34;7-在cddvd里设置勾选启动时连接勾选使用iso映像文件&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#7-在cddvd里设置勾选启动时连接勾选使用iso映像文件&#34;&gt;#&lt;/a&gt; 7 在 CD/DVD 里设置，勾选启动时连接，勾选使用 ISO 映像文件&lt;/h3&gt;
&lt;h2 id=&#34;虚拟机安装设置&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#虚拟机安装设置&#34;&gt;#&lt;/a&gt; 虚拟机安装设置&lt;/h2&gt;
&lt;h3 id=&#34;1-开启虚拟机后选择install-centos7回车进入下一步&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#1-开启虚拟机后选择install-centos7回车进入下一步&#34;&gt;#&lt;/a&gt; 1 开启虚拟机后，选择 Install CentOS7，回车进入下一步&lt;/h3&gt;
&lt;h3 id=&#34;2-选择语言后-点击继续&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#2-选择语言后-点击继续&#34;&gt;#&lt;/a&gt; 2 选择语言后， 点击继续&lt;/h3&gt;
&lt;h3 id=&#34;3-选择亚洲时区&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#3-选择亚洲时区&#34;&gt;#&lt;/a&gt; 3 选择亚洲时区&lt;/h3&gt;
&lt;p&gt;!&lt;/p&gt;
&lt;h3 id=&#34;4-软件选择最小化安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#4-软件选择最小化安装&#34;&gt;#&lt;/a&gt; 4 软件选择最小化安装&lt;/h3&gt;
&lt;h3 id=&#34;5-取消勾选-kdump&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#5-取消勾选-kdump&#34;&gt;#&lt;/a&gt; 5 取消勾选 kdump&lt;/h3&gt;
&lt;h3 id=&#34;6-内存分区选择我要分配分区&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#6-内存分区选择我要分配分区&#34;&gt;#&lt;/a&gt; 6 内存分区选择我要分配分区&lt;/h3&gt;
&lt;h3 id=&#34;选择标准分区&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#选择标准分区&#34;&gt;#&lt;/a&gt; 选择标准分区&lt;/h3&gt;
&lt;h3 id=&#34;开机启动文件-boot分配500m&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#开机启动文件-boot分配500m&#34;&gt;#&lt;/a&gt; 开机启动文件 /boot 分配 500M&lt;/h3&gt;
&lt;h3 id=&#34;swap虚拟内存真实内存的1~2倍配置1024m&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#swap虚拟内存真实内存的1~2倍配置1024m&#34;&gt;#&lt;/a&gt; swap（虚拟内存），真实内存的 1~2 倍，配置 1024M&lt;/h3&gt;
&lt;h3 id=&#34;剩下的内存全部给根&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#剩下的内存全部给根&#34;&gt;#&lt;/a&gt; 剩下的内存全部给 /(根)&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;物理机&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/boot 500~1024m&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;swap &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;云主机&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/boot 500~1024m&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/(剩下的给根)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;服务器&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/boot 500~1024m&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/data 数据 70~80%&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/(剩下的给根)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;7-配置网络&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#7-配置网络&#34;&gt;#&lt;/a&gt; 7 配置网络&lt;/h3&gt;
&lt;h3 id=&#34;配置网卡名称ip地址子网掩码网关dns服务&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#配置网卡名称ip地址子网掩码网关dns服务&#34;&gt;#&lt;/a&gt; 配置网卡名称，IP 地址，子网掩码，网关，DNS 服务&lt;/h3&gt;
&lt;h3 id=&#34;&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#&#34;&gt;#&lt;/a&gt; &lt;/h3&gt;
&lt;h3 id=&#34;8-配置完成后-点击开始安装&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#8-配置完成后-点击开始安装&#34;&gt;#&lt;/a&gt; 8 配置完成后，， 点击开始安装&lt;/h3&gt;
&lt;h3 id=&#34;9-设置root密码&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#9-设置root密码&#34;&gt;#&lt;/a&gt; 9 设置 root 密码&lt;/h3&gt;
&lt;h3 id=&#34;-2&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#-2&#34;&gt;#&lt;/a&gt; &lt;/h3&gt;
&lt;h3 id=&#34;11-完成登录&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#11-完成登录&#34;&gt;#&lt;/a&gt; 11 完成登录&lt;/h3&gt;
&lt;h2 id=&#34;网络的3种模式&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#网络的3种模式&#34;&gt;#&lt;/a&gt; 网络的 3 种模式&lt;/h2&gt;
&lt;h3 id=&#34;nat模式&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nat模式&#34;&gt;#&lt;/a&gt; NAT 模式&lt;/h3&gt;
&lt;p&gt;物理机 IP 的地址转化成多个虚拟机的 IP 地址&lt;/p&gt;
&lt;h3 id=&#34;仅主机模式&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#仅主机模式&#34;&gt;#&lt;/a&gt; 仅主机模式&lt;/h3&gt;
&lt;p&gt;虚拟机之间可以相互通信但是不能上外网&lt;/p&gt;
&lt;h3 id=&#34;桥接模式&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#桥接模式&#34;&gt;#&lt;/a&gt; 桥接模式&lt;/h3&gt;
&lt;p&gt;将物理机网络和虚拟机额网络做一个搭桥&lt;/p&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://wuhegucheng.github.io/2023/04/01/linux/base/01.Markdown/Markdown/</guid>
            <title>Markdown 语法</title>
            <link>http://wuhegucheng.github.io/2023/04/01/linux/base/01.Markdown/Markdown/</link>
            <category>markdown</category>
            <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;markdown语法&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#markdown语法&#34;&gt;#&lt;/a&gt; markdown 语法&lt;/h1&gt;
&lt;h2 id=&#34;标题&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#标题&#34;&gt;#&lt;/a&gt; 标题&lt;/h2&gt;
&lt;h3 id=&#34;一级标题&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#一级标题&#34;&gt;#&lt;/a&gt; 一级标题&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1个#+空格+文字&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;二级标题&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#二级标题&#34;&gt;#&lt;/a&gt; 二级标题&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;2个#+空格+文字&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;以此类推&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;分类&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#分类&#34;&gt;#&lt;/a&gt; 分类&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1级：1个— +空格&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2级：TAB+键&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;返回上一级：一直按enter键 或shift+TAB&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;水果
&lt;ul&gt;
&lt;li&gt;苹果
&lt;ul&gt;
&lt;li&gt;红富士&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;香蕉
&lt;ul&gt;
&lt;li&gt;芝麻蕉&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;西瓜
&lt;ul&gt;
&lt;li&gt;香瓜&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;背景框&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#背景框&#34;&gt;#&lt;/a&gt; 背景框&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;3个反引号（TAB键上方）+回车&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;好好学习天天向上&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&#34;表格&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#表格&#34;&gt;#&lt;/a&gt; 表格&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;3个 |（竖线/管道符，回车键上方）每个竖线中间空2格&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;1&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;2&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;3&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;4&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&#34;超链接&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#超链接&#34;&gt;#&lt;/a&gt; 超链接&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[ ]括号内是文字+()括号内是网址&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&#34;www.baidu.com&#34;&gt;百度&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;图片&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#图片&#34;&gt;#&lt;/a&gt; 图片&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;!+[]+()     &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;可插入电脑图片，也可以复制网站图片地址&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img data-src=&#34;C:%5CUsers%5CAdministrator%5CPictures%5C%E6%8A%A4%E7%9C%BC%E6%A8%A1%E5%BC%8F_20221024130216.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://i0.hdslb.com/bfs/article/7471e4d22ed196ab3bb952cf1ba124d45698fb2f.jpg@942w_656h_progressive.webp&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;h3 id=&#34;目录&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#目录&#34;&gt;#&lt;/a&gt; 目录&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[]里面+TOC&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;[TOC]&lt;/p&gt;
&lt;h3 id=&#34;单词高亮显示&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#单词高亮显示&#34;&gt;#&lt;/a&gt; 单词高亮显示&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;文字前后+1个反引号 `&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;我喜欢 &lt;code&gt;草莓&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;字体颜色&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#字体颜色&#34;&gt;#&lt;/a&gt; 字体颜色&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;lt;font color=red(颜色、RGB颜色)&amp;gt;草莓（文字）&amp;lt;/font&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;font color=red&gt;草莓&lt;/font&gt;&lt;/p&gt;
&lt;h3 id=&#34;加粗字体&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#加粗字体&#34;&gt;#&lt;/a&gt; 加粗字体&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;**+文字+**&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;草莓&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;倾斜字体&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#倾斜字体&#34;&gt;#&lt;/a&gt; 倾斜字体&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;*+文字+*&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;草莓&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;加粗倾斜字体&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#加粗倾斜字体&#34;&gt;#&lt;/a&gt; 加粗倾斜字体&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;***+文字+***&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;草莓&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&#34;分割线&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#分割线&#34;&gt;#&lt;/a&gt; 分割线&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;3个-&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;h4 id=&#34;删除体&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#删除体&#34;&gt;#&lt;/a&gt; 删除体&lt;/h4&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;2个~  +文字+  ~&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;s&gt;苹果&lt;/s&gt;&lt;/p&gt;
&lt;h3 id=&#34;引用&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#引用&#34;&gt;#&lt;/a&gt; 引用&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&amp;gt; +空格+文字&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;下一级：回车+&amp;gt;+文字&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;水果&lt;/p&gt;
&lt;p&gt;草莓&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;我爱吃草莓&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;复选框&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#复选框&#34;&gt;#&lt;/a&gt; 复选框&lt;/h3&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;- + 空格 + [x] + 空格&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;今日计划&lt;/p&gt;
&lt;ul class=&#34;task-list&#34;&gt;
&lt;li class=&#34;task-list-item&#34;&gt;&lt;input type=&#34;checkbox&#34; id=&#34;cbx_0&#34; checked=&#34;true&#34; disabled=&#34;true&#34;&gt;&lt;label for=&#34;cbx_0&#34;&gt; 锻炼&lt;/label&gt;&lt;/li&gt;
&lt;li class=&#34;task-list-item&#34;&gt;&lt;input type=&#34;checkbox&#34; id=&#34;cbx_1&#34; checked=&#34;true&#34; disabled=&#34;true&#34;&gt;&lt;label for=&#34;cbx_1&#34;&gt; 吃饭&lt;/label&gt;&lt;/li&gt;
&lt;li class=&#34;task-list-item&#34;&gt;&lt;input type=&#34;checkbox&#34; id=&#34;cbx_2&#34; checked=&#34;true&#34; disabled=&#34;true&#34;&gt;&lt;label for=&#34;cbx_2&#34;&gt; 打豆豆&lt;/label&gt;&lt;/li&gt;
&lt;/ul&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/01.%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/01.%20%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/</guid>
            <title>111</title>
            <link>http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/01.%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/01.%20%E6%9E%B6%E6%9E%84%E4%BB%8B%E7%BB%8D/</link>
            <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;架构介绍&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#架构介绍&#34;&gt;#&lt;/a&gt; 架构介绍&lt;/h1&gt;
&lt;h2 id=&#34;架构相关名词&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#架构相关名词&#34;&gt;#&lt;/a&gt; 架构相关名词&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;项目：独立的一个网站，或者独立的一个app应用 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;架构：用来维护或者运行一个项目的一组服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;集群：为解决某个特定问题将多台计算机组合起来形成的单个系统（避免单点故障）&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;高可用：当一台服务器不可用，另一台服务器自动接管，保证业务不down机 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;负载均衡：将用户的请求，分摊到多个操作单元上执行,为了解决服务器压力不均衡的问题&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;架构演变&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#架构演变&#34;&gt;#&lt;/a&gt; 架构演变&lt;/h2&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220512193446428.png&#34; alt=&#34;image-20220512193446428&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#用户请求，针对用户设计的架构 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;在浏览器中输入：https://blog.driverzeng.com &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;1.DNS域名解析服务器 ==》将blog.driverzeng.com解析成IP地址：114.80.187.8 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2.浏览器和该IP地址（114.80.187.8）的服务器(https:// 443)端（http:// 80）口建立连接 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3.请求要经过114.80.187.8服务器的防火墙，如果允许你的IP（101.229.206.48）访问服务器的443端口 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 防火墙：过滤用户请求，防止恶意请求，针对IP和端口进行限制 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 关闭防火墙，关闭Selinux &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- CentOS6之前：iptables &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- CentOS7开始：firewalld，也可以使用iptables &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 硬件防火墙 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4.请求通过防火墙后，访问到负载均衡服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Nginx &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- HAproxy &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- LVS &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- F5（硬件） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5.请求通过负载均衡后会被下发到后面的web服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Nginx &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Apache &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Tomcat（Java） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- PHP（PHP代码容器） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6.前端代码会请求后端的代码，后端代码请求数据库 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- MySQL &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Oracle &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- SQLServer &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- MariaDB &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7.数据库之前会有缓存服务器，如果缓存中有请求的数据，则直接通过缓存返回给用户 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Redis &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- MangoDB &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Memcache &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8.文件服务器（共享存储服务器）专门用来存储图片，视频，二进制类型的数据 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- NFS &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- GFS &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- FastDFS &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- ceph&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#运维自动化工具 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;所有服务器，至少要有两块网卡（有两个IP地址） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;外网IP地址：针对用户访问，给用户提供服务 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;内网IP地址：服务器之间互相可以访问 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;跳板机，VPN：访问内网服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- openvpn &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- pptpvpn &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- jumpserver &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;监控：检测服务器上的应用状态，硬件状态，网络状态，系统状态，业务状态 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- zabbix &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- nagios &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- open-falcon &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- promethues &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- cacti&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;数据备份服务器：用来备份所有重要数据 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- rsync 批量管理服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- ansible &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- saltstack &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;日志服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- ELK &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- flume &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;代码发布服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Jenkins &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;代码存储服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- Gitlab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;架构模板机准备&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#架构模板机准备&#34;&gt;#&lt;/a&gt; 架构模板机准备&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#编辑网卡名&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;win按Tab键/Mac按e键&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;quiet net.ifnames=0 biosdevname=0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#配置网卡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##编辑第一块网卡 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;vi /etc/sysconfig/network-scripts/ifcfg-eth0 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;删除UUID  &lt;span class=&#34;comment&#34;&gt;#mac地址&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;BOOTPROTO=dhcp =&amp;gt; BOOTPROTO=static 或者 BOOTPROTO=none &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ONBOOT=no =&amp;gt; ONBOOT=&lt;span class=&#34;built_in&#34;&gt;yes&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;IPADDR=10.0.0.100 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;NETMASK=255.255.255.0 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;GATEWAY=10.0.0.2 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;DNS1=223.5.5.5 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##编辑第二块网卡 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;vi /etc/sysconfig/network-scripts/ifcfg-eth1 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;删除UUID &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;BOOTPROTO=dhcp =&amp;gt; BOOTPROTO=static 或者 BOOTPROTO=none &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ONBOOT=no =&amp;gt; ONBOOT=&lt;span class=&#34;built_in&#34;&gt;yes&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;IPADDR=172.16.1.100 0&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;NETMASK=255.255.255.0 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##重启网卡 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl restart network&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#系统优化&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#1.更改yum源 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##删除所有系统内置yum源&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# gzip /etc/yum.repos.d/*.repo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;或&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# rm -fr /etc/yum.repos.d/* &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##Base源 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##Epel源 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##优化阿里云的源（删除多余的baseurl） &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# vi /etc/yum.repos.d/CentOS-Base.repo&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#安装基础命令和环境 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;yum install net-tools vim tree htop iftop gcc gcc-c++ glibc iotop lrzsz sl wget unzip telnet nmap nc psmisc dos2unix bash-completion bash-completion-extra sysstat httpd-tools -y&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#关闭防火墙 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##关闭防火墙服务 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# systemctl stop firewalld &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##取消防火墙开机自启 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# systemctl disable firewalld&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#关闭selinux &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##查看selinux &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# getenforce &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Enforcing &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##开启状态 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##临时关闭 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# setenforce 0 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##永久关闭 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# vim /etc/sysconfig/selinux SELINUX=enfocing =&amp;gt; SELINUX=disabled&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#优化文件描述符 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##查看文件描述 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# ulimit -n 65535 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@localhost ~]&lt;span class=&#34;comment&#34;&gt;# ulimit -a &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;##设置文件描述符为65535 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;* - nofile 65535&amp;#x27;&lt;/span&gt; &amp;gt;&amp;gt; /etc/security/limits.conf&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#修改主机脚本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;read&lt;/span&gt; -p &lt;span class=&#34;string&#34;&gt;&amp;quot;Please input HOSTNAME：&amp;quot;&lt;/span&gt; h&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;read&lt;/span&gt; -p &lt;span class=&#34;string&#34;&gt;&amp;quot;Please input IP：&amp;quot;&lt;/span&gt; IP&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;hostnamectl set-hostname &lt;span class=&#34;variable&#34;&gt;$h&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;sed -i &lt;span class=&#34;string&#34;&gt;&amp;quot;s#100#&lt;span class=&#34;variable&#34;&gt;$IP&lt;/span&gt;#g&amp;quot;&lt;/span&gt; /etc/sysconfig/network-scripts/ifcfg-eth&amp;#123;0,1&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;机器准备&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#机器准备&#34;&gt;#&lt;/a&gt; 机器准备&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;外网 IP&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;内网 IP&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;主机名&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.5&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.5&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;lb01&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.6&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.6&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;lb02&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;web01&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.8&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.8&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;web02&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.9&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.9&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;web03&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.31&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.31&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;nfs&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.41&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.41&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;backup&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.51&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.51&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;db01&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.61&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.61&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;m01&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.71&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.71&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;zabbix&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/03.NFS%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8/01.%20NFS%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8/</guid>
            <title>NFS共享存储</title>
            <link>http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/03.NFS%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8/01.%20NFS%E5%85%B1%E4%BA%AB%E5%AD%98%E5%82%A8/</link>
            <category>NFS</category>
            <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;nfs共享存储&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nfs共享存储&#34;&gt;#&lt;/a&gt; NFS 共享存储&lt;/h1&gt;
&lt;h2 id=&#34;环境准备&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#环境准备&#34;&gt;#&lt;/a&gt; 环境准备&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;主机名&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;WanIP&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;LanIP&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;角色&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;web01&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;网站服务（nfs 客户端）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;web02&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.8&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.8&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;网站服务（nfs 客户端）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;nfs&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.31&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.31&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;共享存储（nfs 服务端）&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;nfs概述&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nfs概述&#34;&gt;#&lt;/a&gt; NFS 概述&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;NFS（Network File System）&lt;/code&gt; 通过网络来做文件存储&lt;/p&gt;
&lt;p&gt;&lt;code&gt;NFS&lt;/code&gt;  用于企业集群架构中 *,* 如果是大型网站 *,* 会用到更复杂的分布式文件系统 &lt;code&gt;FastDFS&lt;/code&gt; , &lt;code&gt;glusterfs&lt;/code&gt; , &lt;code&gt;HDFS&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;为什么使用共享存储？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;实现多台服务器之间数据共享&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;实现多台服务器之间数据一致&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;nfs工作原理&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nfs工作原理&#34;&gt;#&lt;/a&gt; NFS 工作原理&lt;/h2&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220518160108133.png&#34; alt=&#34;image-20220518160108133&#34;&gt;&lt;/p&gt;
&lt;p&gt;1. 用户进程访问 NFS 客户端，使用不同的函数对数据进行处理&lt;/p&gt;
&lt;p&gt;2.NFS 客户端通过 TCP/IP 的方式传递给 NFS 服务端&lt;/p&gt;
&lt;p&gt;3.NFS 服务端接收到请求后，会先调用 portmap 进程进行端口映射&lt;/p&gt;
&lt;p&gt;4.nfsd 进程用于判断 NFS 客户端是否拥有权限连接 NFS 服务端&lt;/p&gt;
&lt;p&gt;5.Rpc.mount 进程判断客户端是否有对应的权限进行验证&lt;/p&gt;
&lt;p&gt;6.idmap 进程实现用户映射和压缩&lt;/p&gt;
&lt;p&gt;7. 最后 NFS 服务端会将对应请求的函数转换为本地能识别的命令，传递至内核，由内核驱动硬件&lt;/p&gt;
&lt;p&gt;&lt;font color=&#39;red&#39;&gt;&lt;strong&gt;注意: rpc 是一个远程过程调用，那么使用 nfs 必须有 rpc 服务&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#安装apache、php&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;yum install -y httpd php&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#httpd站点目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/var/www/html&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#启动服务&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;systemctl start httpd&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#修改属主、属组&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;chown&lt;/span&gt; -R apache.apache /var/www/html/&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;安装部署nfs服务端&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#安装部署nfs服务端&#34;&gt;#&lt;/a&gt; 安装部署 NFS 服务端&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#C5 C6安装nfs服务 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# yum install -y nfs rpcbind&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#C7安装nfs服务 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# yum install -y nfs-utils&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#配置NFS服务端 NFS配置文件的位置 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# ll /etc/exports &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-rw-r--r--. 1 root root 0 Jun 7 2013 /etc/exports&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# vim /etc/exports &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#共享目录、允许访问NFS服务端的网段 (可读可写,同步,任何用户都映射成nfs的匿名用户) &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/data 172.16.1.0/24(rw,&lt;span class=&#34;built_in&#34;&gt;sync&lt;/span&gt;,all_squash)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#创建共享目录 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# mkdir /data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#修改共享目录的属主和属组为nfs的匿名用户 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# chown nfsnobody:nfsnobody /data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#启动服务 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# systemctl start nfs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#加入开机自启 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# systemctl enable nfs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#检查进程 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# ps -ef|grep [n]fs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#检测配置文件是否生效 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@nfs ~]&lt;span class=&#34;comment&#34;&gt;# cat /var/lib/nfs/etab&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;/data	172.16.1.0/24(rw,&lt;span class=&#34;built_in&#34;&gt;sync&lt;/span&gt;,wdelay,hide,nocrossmnt,secure,root_squash,all_squash,no_subtree_check,secure_locks,acl,no_pnfs,anonuid=65534,anongid=65534,sec=sys,rw,secure,root_squash,all_squash)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;nfs配置详解&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#nfs配置详解&#34;&gt;#&lt;/a&gt; NFS 配置详解&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;nfs 共享参数&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;参数作用&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;rw*&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户端针对服务端的共享目录有可读，可写权限&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;ro&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户端针对服务端的共享目录只读权限&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;root_squash&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户端必须是以 root 身份写入共享目录文件时，到服务端才能以 nfs 的系统用户写入（不常用）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;no_root_squash&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户端以 root 身份连接服务端，也会以 nfs 服务器的 root 用户来操作共享目录（不常用）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;all_squash*&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;无论 NFS 客户端用什么用户访问共享目录，到服务端都是 nfs 的系统用户权限（常用）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;no_all_squash&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;无论 NFS 客户端使用什么账户访问，都不会变成 nfs 系统用户的身份（不常用）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;sync*&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;同时将数据写入到内存与硬盘中，保证不丢失数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;async&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;优先将数据保存到内存，然后再写入硬盘；这样效率更高，但可能会丢失数据&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;anonuid*&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;配置 all_squash 使用，指定 NFS 的用户 UID, 必须存在系统&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;anongid*&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;配置 all_squash 使用，指定 NFS 的用户 UID, 必须存在系统&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;客户端操作&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#客户端操作&#34;&gt;#&lt;/a&gt; 客户端操作&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#1.安装nfs &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@web01 ~]&lt;span class=&#34;comment&#34;&gt;# yum install -y nfs-utils &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@web02 ~]&lt;span class=&#34;comment&#34;&gt;# yum install -y nfs-utils &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#2.查看哪些目录可以挂载 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@web01 ~]&lt;span class=&#34;comment&#34;&gt;# showmount -e 172.16.1.31 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@web02 ~]&lt;span class=&#34;comment&#34;&gt;# showmount -e 172.16.1.31 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#3.挂载共享目录 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@web01 ~]&lt;span class=&#34;comment&#34;&gt;# mount -t nfs 172.16.1.31:/data /opt &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@web02 ~]&lt;span class=&#34;comment&#34;&gt;# mount -t nfs 172.16.1.31:/data /opt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#查看nfs配置文件是否生效&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; /var/lib/nfs/etab&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/02.rsync%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD/01.%20rsync%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD/</guid>
            <title>rsync数据备份</title>
            <link>http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/02.rsync%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD/01.%20rsync%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD/</link>
            <category>rsync</category>
            <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;rsync数据备份&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#rsync数据备份&#34;&gt;#&lt;/a&gt; rsync 数据备份&lt;/h1&gt;
&lt;h2 id=&#34;环境准备&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#环境准备&#34;&gt;#&lt;/a&gt; 环境准备&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;主机名&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;内网 IP&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;外网 IP&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;角色&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;web01&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.7&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;备份客户端&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;backup&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;172.16.1.41&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;10.0.0.41&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;备份服务端&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&#34;rsync概述&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#rsync概述&#34;&gt;#&lt;/a&gt; rsync 概述&lt;/h2&gt;
&lt;p&gt;rsync 是一款开源、快速、多功能、可实现&lt;strong&gt;全量及增量&lt;/strong&gt;的本地或&lt;strong&gt;远程数据同步&lt;/strong&gt;备份的优秀工具。rsync 软件适用于 Unix、linux、windows 等多种操作平台&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;为什么使用 rsync 不用 scp？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;scp 是基于 ssh 协议的命令，不是一个服务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;scp 每次都基于全量拷贝，rsync 支持增量拷贝&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;备份类型&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#备份类型&#34;&gt;#&lt;/a&gt; 备份类型&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;全量备份&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;将数据全部备份出来&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220513223426274.png&#34; alt=&#34;image-20220513223426274&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;增量备份&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;基于上一次备份，新增部分的数据备份出来&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220513223539309.png&#34; alt=&#34;image-20220513223539309&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;差异备份&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;基于全量备份，新增部分的数据备份出来&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;rsync应用场景&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#rsync应用场景&#34;&gt;#&lt;/a&gt; rsync 应用场景&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;推：所有主机推送本地数据至 rsync 备份服务器，会导致数据同步缓慢（适合少量数据备份）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220513225122692.png&#34; alt=&#34;image-20220513225122692&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;拉：rsync 备份服务端拉去所有主机上的数据，会导致备份服务器开销过大&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/360%E6%88%AA%E5%9B%BE1814122193114116.png&#34; alt=&#34;360截图1814122193114116&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;大量服务器备份场景&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220513225426835.png&#34; alt=&#34;image-20220513225426835&#34;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;异地备份实现思路&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220513225858773.png&#34; alt=&#34;image-20220513225858773&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;rsync传输模式&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#rsync传输模式&#34;&gt;#&lt;/a&gt; rsync 传输模式&lt;/h2&gt;
&lt;p&gt;&lt;font color=&#39;red&#39;&gt;&lt;strong&gt;注意：rsync 拷贝目录时，加 / 和不加 / 是有区别的&lt;/strong&gt;&lt;/font&gt;&lt;/p&gt;
&lt;p&gt;/etc/ ：将 etc 目录下的所有文件拷贝过去，不包括目录本身&lt;/p&gt;
&lt;p&gt;/etc ：将 etc 目录本身和目录下的所有文件一并拷贝过去&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;本地模式（cp）&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;Local: rsync [OPTION...] SRC... [DEST] &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;built_in&#34;&gt;cp&lt;/span&gt; [OPTION]... SOURCE DEST &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#语法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;rsync [选项] 源文件.. 目标路径&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;远程模式（scp）&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;Access via remote shell: &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	Pull: 拉 rsync [OPTION...] [USER@]HOST:SRC... [DEST] &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	Push: 推 rsync [OPTION...] SRC... [USER@]HOST:DEST&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#语法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;拉：rsync [选项] [用户@]主机IP:文件路径 本机目录 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;推：rsync [选项] 本机文件 [用户@]主机IP:目录&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;注意：如果不加 用户@ 默认以当前系统登录的用户为用户名&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;守护进程模式（把 rsync 当成服务启动）&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;Access via rsync daemon: &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	Pull: rsync [OPTION...] [USER@]HOST::SRC... [DEST] &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	Push: rsync [OPTION...] SRC... [USER@]HOST::DEST &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;拉：rsync [选项..] [用户名@]主机IP::配置文件中的模块名 本机目录 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;推：rsync [选项..] 本机文件 [用户名@]主机IP::配置文件中的模块名&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;企业中为啥使用守护进程模式？&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;远程模式和 scp 差不多，基于 ssh 协议&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;需要知道系统的用户名和密码&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;守护进程不需要 ssh 协议，服务启动后，自带端口&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;守护进程可以设置匿名用户，不需要使用系统用户&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;rsync选项&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#rsync选项&#34;&gt;#&lt;/a&gt; rsync 选项&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;-a：归档模式传输, 等于-tropgDl &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-v：显示同步过程 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-z：压缩，提高传输效率 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;============================== &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-t：time 保持文件的时间信息 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-r：拷贝目录时，递归拷贝 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-o：owner 保持文件的属主信息 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-g：group 保持文件的属组信息 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-p：perm 保持文件的权限信息 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-D：device 保持设备文件的信息 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-l：&lt;span class=&#34;built_in&#34;&gt;link&lt;/span&gt; 保留软链接&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;==============================&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-P：显示进度 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-L：保留软链接指向的目标文件 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--exclude=PATTERN 指定排除不需要传输的文件模式 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--exclude-from=file 指定排除文件 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--bwlimit=1 限速传输 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--partial 断点续传 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--delete 决定数据是否要同步 &lt;span class=&#34;built_in&#34;&gt;rm&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;--password-file= 指定密码文件&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/04.SSH%E8%BF%9E%E6%8E%A5/01.%20ssh%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86/</guid>
            <title>ssh远程管理</title>
            <link>http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/04.SSH%E8%BF%9E%E6%8E%A5/01.%20ssh%E8%BF%9C%E7%A8%8B%E7%AE%A1%E7%90%86/</link>
            <category>ssh</category>
            <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;ssh远程管理&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ssh远程管理&#34;&gt;#&lt;/a&gt; ssh 远程管理&lt;/h1&gt;
&lt;h2 id=&#34;远程连接&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#远程连接&#34;&gt;#&lt;/a&gt; 远程连接&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;Linux：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- ssh 端口：22 加密传输数据 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- telnet 端口：23 明文传输数据 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Windows： &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- rdp 端口：3389 remote desktop protocol&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;ssh相关命令及选项&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ssh相关命令及选项&#34;&gt;#&lt;/a&gt; ssh 相关命令及选项&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;注意：不加用户@，默认使用当前登录的用户&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh：远程连接Linux服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-p：port指定端口 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#不连接上服务器，直接执行命令 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh root@10.0.0.41 &lt;span class=&#34;string&#34;&gt;&amp;#x27;ls /&amp;#x27;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;scp：远程拷贝数据（写在前面的是源文件） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-r：递归（远程拷贝目录） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-p：拷贝的时候保持属性&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-P：大写p指定port&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;推：scp sersync2.5.4 root@172.16.1.7:/root &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;拉：scp root@172.16.1.7:/root/sersync2.5.4 /opt&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#总结： &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;1.scp通过ssh协议加密方式进行文件或目录拷贝&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2.scp连接时的用户作为为拷贝文件或目录的权限。（-p保持文件属性，-a） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3.scp支持数据推送和拉取，每次都是全量拷贝，效率较低&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;ssh免密连接&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ssh免密连接&#34;&gt;#&lt;/a&gt; ssh 免密连接&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;验证方式：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;用户名密码验证&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;密钥对验证方式&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;ssh 密钥对认证流程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220524001806812.png&#34; alt=&#34;image-20220524001806812&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#ssh-keygen：生成密钥对 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# ssh-keygen&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Generating public/private rsa key pair.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#将秘钥保存到文件中，可以指定其他路径（直接回车） &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Enter file &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;which&lt;/span&gt; to save the key (/root/.ssh/id_rsa):&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Created directory &lt;span class=&#34;string&#34;&gt;&amp;#x27;/root/.ssh&amp;#x27;&lt;/span&gt;.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#给密钥对设置密码，不需要设置（直接回车） &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Enter passphrase (empty &lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; no passphrase):&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#重复输入设置的密码（直接回车） &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Enter same passphrase again:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Your identification has been saved &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; /root/.ssh/id_rsa.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Your public key has been saved &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; /root/.ssh/id_rsa.pub.&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;The key fingerprint is:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;SHA256:porTOTgmfhwGF1eJeesKte03G0ZbLlPh6C3kJX0qRDw root@manage01&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;The key&lt;span class=&#34;string&#34;&gt;&amp;#x27;s randomart image is:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;+---[RSA 2048]----+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|      +..        |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|   . + o.        |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|    o . .E .     |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;| . . . .. = .    |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|  o . + S* * .   |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|   + . =* O o    |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|  ooo.+  @ +     |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|. =++o ..o*      |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;|.+oo..  ..o      |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;+----[SHA256]-----+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#生成后的密钥对 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;[root@m01 ~]# ll /root/.ssh/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;total 8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;-rw------- 1 root root 1679 May 24 08:21 id_rsa&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;-rw-r--r-- 1 root root  395 May 24 08:21 id_rsa.pub&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#ssh-copy-id：发送公钥 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;-i：指定公钥位置 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;[root@m01 ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.7 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;[root@m01 ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.8 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;[root@m01 ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.31 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;[root@m01 ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.41&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#.ssh目录中的know_host作用 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;[root@m01 ~]# cat ~/.ssh/known_hosts &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;记录连接过的服务器，如果没有连接过（第一次连接），需要输入yes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#生成密钥对命令：ssh-keygen &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;mkdir -m 700 ~/.ssh &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;1.在当前用户的家目录下创建了一个隐藏目录 .ssh mkdir ~/.ssh &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;2.将密钥对存放目录 .ssh 授权为 700 chmod 700 ~/.ssh &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;3.将公钥内容写入 ~/.ssh/id_rsa.pub 文件中 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;4.将私钥内容写入 ~/.ssh/id_rsa 文件中 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;5.将私钥文件授权为 600 chmod 600 ~/.ssh/id_rsa&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;#发送公钥：ssh-copy-id&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;[root@web01 ~]# ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.5 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;输入yes &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;输入密码：1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;1.在远端的指定用户的家目录下创建了一个隐藏目录.ssh ssh root@172.16.1.5 &amp;#x27;&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; ~/.ssh&lt;span class=&#34;string&#34;&gt;&amp;#x27; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;2.将密钥对存放目录 .ssh 授权为 700 ssh root@172.16.1.5 &amp;#x27;&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; 700 ~/.ssh&lt;span class=&#34;string&#34;&gt;&amp;#x27; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;3.先在远端~/.ssh目录下创建文件authorized_keys ssh root@172.16.1.5 &amp;#x27;&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;touch&lt;/span&gt; ~/.ssh/authorized_keys&lt;span class=&#34;string&#34;&gt;&amp;#x27; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;4.将authorized_keys文件授权为600 ssh root@172.16.1.5 &amp;#x27;&lt;/span&gt;&lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; 600 ~/.ssh/authorized_keys&lt;span class=&#34;string&#34;&gt;&amp;#x27; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;5.将公钥内容，保存到authorized_keys文件中&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;免密使用场景&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#免密使用场景&#34;&gt;#&lt;/a&gt; 免密使用场景&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;批量查看服务器信息&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;meta&#34;&gt;#!/bin/bash &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[ &lt;span class=&#34;variable&#34;&gt;$#&lt;/span&gt; -ne 1 ] &amp;amp;&amp;amp; &lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;请输入执行的命令&amp;quot;&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&#34;built_in&#34;&gt;exit&lt;/span&gt; 1 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; i &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; 5 7 8 31 41 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;do&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;#########172.16.1.&lt;span class=&#34;variable&#34;&gt;$i&lt;/span&gt;#####&amp;quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	ssh root@172.16.1.&lt;span class=&#34;variable&#34;&gt;$i&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt;&amp;quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;跳板机&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;89&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# cat jump.sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/bash &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#jumpserver &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lb01=172.16.1.5 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;lb02=172.16.1.6 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;web01=172.16.1.7 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;web02=172.16.1.8 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;web03=172.16.1.9 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;nfs=172.16.1.31 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;backup=172.16.1.41 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;db01=172.16.1.51 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;m01=172.16.1.61 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;zabbix=172.16.1.71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;title&#34;&gt;menu&lt;/span&gt;&lt;/span&gt;()&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; &amp;lt;&amp;lt;-&lt;span class=&#34;string&#34;&gt;EOF &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	+-------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	1) lb01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	2) lb02&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	3) web01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	4) web02&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	5) web03&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	6) nfs&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	7) backup&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	8) db01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	9) m01&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	10) zabbix&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	h) help&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	+-------------------------+&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;string&#34;&gt;	EOF&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#菜单函数 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;menu &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#连接函数 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;function&#34;&gt;&lt;span class=&#34;title&#34;&gt;connect&lt;/span&gt;&lt;/span&gt;()&amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	ping -c 1 -w 1 &lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; &amp;amp;&amp;gt;/dev/null &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;if&lt;/span&gt; [ $? -eq 0 ];&lt;span class=&#34;keyword&#34;&gt;then&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		ssh root@&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; -e &lt;span class=&#34;string&#34;&gt;&amp;quot;\033[5;4;40;31m 别连了,我的哥,&lt;span class=&#34;variable&#34;&gt;$2&lt;/span&gt;:&lt;span class=&#34;variable&#34;&gt;$1&lt;/span&gt;机器都没开!!!\033[0m&amp;quot;&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;fi&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#控制不让输入ctrl+c,z &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;trap&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;quot;&amp;quot;&lt;/span&gt; HUP INT TSTP &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;literal&#34;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;built_in&#34;&gt;read&lt;/span&gt; -p &lt;span class=&#34;string&#34;&gt;&amp;quot;请输入要连接的主机编号：&amp;quot;&lt;/span&gt; num &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;$num&lt;/span&gt; &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		1|lb01) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$lb01&lt;/span&gt; lb01 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		2|lb02) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$lb02&lt;/span&gt; lb02 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		3|web01) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$web01&lt;/span&gt; web01 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		4|web02) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$web02&lt;/span&gt; web02 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		5|web03)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$web03&lt;/span&gt; web03 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		6|nfs) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$nfs&lt;/span&gt; nfs &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		7|backup) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$backup&lt;/span&gt; backup &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		8|db01)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$db01&lt;/span&gt; db01 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		9|m01) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$m01&lt;/span&gt; m01 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		10|zabbix)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			connect &lt;span class=&#34;variable&#34;&gt;$zabbix&lt;/span&gt; zabbix &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		h|&lt;span class=&#34;built_in&#34;&gt;help&lt;/span&gt;) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			clear&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			menu &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		close) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			&lt;span class=&#34;built_in&#34;&gt;break&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;keyword&#34;&gt;esac&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;ssh安全优化&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#ssh安全优化&#34;&gt;#&lt;/a&gt; SSH 安全优化&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#ssh配置文件 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# vim /etc/ssh/sshd_config &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17 Port 52022  &lt;span class=&#34;comment&#34;&gt;#修改默认端口 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;115 UseDNS no  &lt;span class=&#34;comment&#34;&gt;#关闭反向解析 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38 PermitRootLogin no  &lt;span class=&#34;comment&#34;&gt;#禁止root用户登录 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65 PasswordAuthentication no  &lt;span class=&#34;comment&#34;&gt;#禁止使用密码登录 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79 GSSAPIAuthentication no  &lt;span class=&#34;comment&#34;&gt;#关闭GSSAPI认证&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#将以下内容，直接复制到文件最后一行&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;Port 6666  &lt;span class=&#34;comment&#34;&gt;#变更SSH服务远程连接端口&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;PermitRootLogin no  &lt;span class=&#34;comment&#34;&gt;#禁止root用户直接远程登录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;PasswordAuthentication no  &lt;span class=&#34;comment&#34;&gt;#禁止使用密码直接远程登录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;UseDNS no  &lt;span class=&#34;comment&#34;&gt;#禁止ssh进行dns反向解析，影响ssh连接效率参数&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;GSSAPIAuthentication no  &lt;span class=&#34;comment&#34;&gt;# 禁止GSS认证，减少连接时产生的延迟&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#重启服务 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# systemctl restart sshd&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	1）在windows上生成密钥对 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		- 使用windows的命令行执行 ssh-keygen &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		- 使用Xshell&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;解决方案&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#解决方案&#34;&gt;#&lt;/a&gt; 解决方案&lt;/h2&gt;
&lt;p&gt;如果已经优化完 ssh，发现服务器上出现以下问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;没有普通用户 useradd roger（无法创建，进入单用户模式）&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;windows 上秘钥没有推送&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;1）在 windows 上生成密钥对&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用 windows 的命令行执行 ssh-keygen&lt;/li&gt;
&lt;li&gt;使用 Xshell&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2）使用 Xshell 生成密钥对&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220524223210599.png&#34; alt=&#34;image-20220524223210599&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220524223252594.png&#34; alt=&#34;image-20220524223252594&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220524223321469.png&#34; alt=&#34;image-20220524223321469&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220524223345276.png&#34; alt=&#34;image-20220524223345276&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220524223415813.png&#34; alt=&#34;image-20220524223415813&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220524223450300.png&#34; alt=&#34;image-20220524223450300&#34;&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;[roger@m01 ~]$ &lt;span class=&#34;built_in&#34;&gt;mkdir&lt;/span&gt; .ssh &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[roger@m01 ~]$ &lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; 700 .ssh/ &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[roger@m01 ~]$ vim .ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAuJWo9sSLut7rrATebtwxBZXAoXINN8bXot9VIwXakKZ+711pFWlE2gI52Qkke5xCBMMah72DK00GjkXYEhMm/DxoXloO5ORPkszl5q9BcSjI3k0Ru9BGkwRqtGjzvrHsrSvunJJtglMpe8sEs7KYrzOmHCNxk60h6yxQzS88l76rMMqYDOeChjyyQloGqC4xSqHQFlEF1NgdIlg2o/q69mieH8S9igOeAXbZFGH8219zNTV+WJ/U7nRQGSXtVss8f2pfK0wGLQgz+nR0u3BJUpRevpcqcF+ybxm5QZb/X8NZEW5ca2YsLInxoRCBE88tzXH5K/obwX98kJ6vqlqZJw== rsa 2048-052422&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[roger@m01 ~]$ &lt;span class=&#34;built_in&#34;&gt;chmod&lt;/span&gt; 600 .ssh/authorized_keys&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;免交互生成密钥对&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#免交互生成密钥对&#34;&gt;#&lt;/a&gt; 免交互生成密钥对&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;ssh-keygen -t rsa -P &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt; -f ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-t：指定加密类型 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-P：空密码 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-f：秘钥生成的位置&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;免交互推送公钥&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#免交互推送公钥&#34;&gt;#&lt;/a&gt; 免交互推送公钥&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;90&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#不循环的写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/bash &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;ls&lt;/span&gt; -l ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null || ssh-keygen -t rsa -P &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt; -f ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.31 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.41 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.5 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.7 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;ssh-copy-id -i ~/.ssh/id_rsa.pub root@172.16.1.8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#循环的写法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/bash &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;ls&lt;/span&gt; -l ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null || ssh-keygen -t rsa -P &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt; -f ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; n &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; `&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; /root/1.txt`;&lt;span class=&#34;keyword&#34;&gt;do&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	ssh-copy-id -i ~/.ssh/id_rsa.pub root@&lt;span class=&#34;variable&#34;&gt;$n&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#解决密码交互问题&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;1）使用expect解决 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# yum install -y expect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/usr/bin/expect &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;set&lt;/span&gt; ip 172.16.1.31 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;set&lt;/span&gt; pass 1 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;set&lt;/span&gt; &lt;span class=&#34;built_in&#34;&gt;timeout&lt;/span&gt; 30 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;spawn ssh-keygen&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;expect &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;string&#34;&gt;&amp;quot;id_rsa):&amp;quot;&lt;/span&gt; &amp;#123;send &lt;span class=&#34;string&#34;&gt;&amp;quot;\r&amp;quot;&lt;/span&gt;; exp_continue&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;string&#34;&gt;&amp;quot;passphrase):&amp;quot;&lt;/span&gt; &amp;#123;send &lt;span class=&#34;string&#34;&gt;&amp;quot;\r&amp;quot;&lt;/span&gt;; exp_continue&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;string&#34;&gt;&amp;quot;again:&amp;quot;&lt;/span&gt; &amp;#123;send &lt;span class=&#34;string&#34;&gt;&amp;quot;\r&amp;quot;&lt;/span&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;expect eof&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;spawn ssh-copy-id -i /root/.ssh/id_rsa.pub root@&lt;span class=&#34;variable&#34;&gt;$ip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;expect &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;string&#34;&gt;&amp;quot;(yes/no)&amp;quot;&lt;/span&gt; &amp;#123;send &lt;span class=&#34;string&#34;&gt;&amp;quot;yes\r&amp;quot;&lt;/span&gt;; exp_continue&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;span class=&#34;string&#34;&gt;&amp;quot;password:&amp;quot;&lt;/span&gt; &amp;#123;send &lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;span class=&#34;variable&#34;&gt;$pass&lt;/span&gt;\r&amp;quot;&lt;/span&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#expect &amp;quot;root@*&amp;quot; &amp;#123;send &amp;quot;df -h\r&amp;quot;&amp;#125; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#expect &amp;quot;root@*&amp;quot; &amp;#123;send &amp;quot;exit\r&amp;quot;&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;expect eof&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2）使用sshpass解决&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# yum install -y sshpass&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-p：指定密码&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-f：从文件中取密码&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-e：从环境变量中取密码&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;-P：设置密码提示&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#ssh不需要输入yes的选项&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# ssh -o &amp;#x27;StrictHostKeyChecking no&amp;#x27; root@172.16.1.7 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# sshpass -p 1 ssh-copy-id -o &amp;#x27;StrictHostKeyChecking no&amp;#x27; -i ~/.ssh/id_rsa.pub root@172.16.1.8&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# cat send_public_key.sh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/bash &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;ls&lt;/span&gt; -l ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null || ssh-keygen -t rsa -P &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt; -f ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; n &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; `&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; /root/1.txt`;&lt;span class=&#34;keyword&#34;&gt;do&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	shpass -p 1 ssh-copy-id -o &lt;span class=&#34;string&#34;&gt;&amp;#x27;StrictHostKeyChecking no&amp;#x27;&lt;/span&gt; -i ~/.ssh/id_rsa.pub root@&lt;span class=&#34;variable&#34;&gt;$ip&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# cat /root/1.txt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.31 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.5 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.7 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#每台机器密码不一致的情况&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/bash&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;ls&lt;/span&gt; -l ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null || ssh-keygen -t rsa -P &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt; -f ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; n &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; `&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; /root/1.txt`;&lt;span class=&#34;keyword&#34;&gt;do&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	pass=`&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;$n&lt;/span&gt;|awk -F &lt;span class=&#34;string&#34;&gt;&amp;#x27;:&amp;#x27;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#123;print $2&amp;#125;&amp;#x27;&lt;/span&gt;` &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	ip=`&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;$n&lt;/span&gt;|awk -F &lt;span class=&#34;string&#34;&gt;&amp;#x27;:&amp;#x27;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#123;print $1&amp;#125;&amp;#x27;&lt;/span&gt;` &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	sshpass -p &lt;span class=&#34;variable&#34;&gt;$pass&lt;/span&gt; ssh-copy-id -o &lt;span class=&#34;string&#34;&gt;&amp;#x27;StrictHostKeyChecking no&amp;#x27;&lt;/span&gt; -i ~/.ssh/id_rsa.pub root@&lt;span class=&#34;variable&#34;&gt;$ip&lt;/span&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;[root@m01 ~]&lt;span class=&#34;comment&#34;&gt;# cat /root/1.txt&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.31:1 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.41:2 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.5:3 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.7:4 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;172.16.1.8:111&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#优化后不使用判断的脚本&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#!/bin/bash &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;. /etc/init.d/functions&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;built_in&#34;&gt;ls&lt;/span&gt; -l ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null || ssh-keygen -t rsa -P &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#x27;&lt;/span&gt; -f ~/.ssh/id_rsa &amp;amp;&amp;gt;/dev/null&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;for&lt;/span&gt; n &lt;span class=&#34;keyword&#34;&gt;in&lt;/span&gt; `&lt;span class=&#34;built_in&#34;&gt;cat&lt;/span&gt; /root/1.txt`;&lt;span class=&#34;keyword&#34;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	pass=`&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;$n&lt;/span&gt;|awk -F &lt;span class=&#34;string&#34;&gt;&amp;#x27;:&amp;#x27;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#123;print $2&amp;#125;&amp;#x27;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	ip=`&lt;span class=&#34;built_in&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;variable&#34;&gt;$n&lt;/span&gt;|awk -F &lt;span class=&#34;string&#34;&gt;&amp;#x27;:&amp;#x27;&lt;/span&gt; &lt;span class=&#34;string&#34;&gt;&amp;#x27;&amp;#123;print $1&amp;#125;&amp;#x27;&lt;/span&gt;`&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	sshpass -p &lt;span class=&#34;variable&#34;&gt;$pass&lt;/span&gt; ssh-copy-id -o &lt;span class=&#34;string&#34;&gt;&amp;#x27;StrictHostKeyChecking no&amp;#x27;&lt;/span&gt; -i ~/.ssh/id_rsa.pub root@&lt;span class=&#34;variable&#34;&gt;$ip&lt;/span&gt; &amp;amp;&amp;gt;/dev/null &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	action &lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;span class=&#34;variable&#34;&gt;$ip&lt;/span&gt; send public key &amp;quot;&lt;/span&gt; /bin/true || \&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	action &lt;span class=&#34;string&#34;&gt;&amp;quot;&lt;span class=&#34;variable&#34;&gt;$ip&lt;/span&gt; send public key &amp;quot;&lt;/span&gt; /bin/false&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;keyword&#34;&gt;done&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
 ]]></description>
        </item>
        <item>
            <guid isPermalink="true">http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/05.http%E5%8D%8F%E8%AE%AE/01.%20http%E5%8D%8F%E8%AE%AE/</guid>
            <title>http协议介绍</title>
            <link>http://wuhegucheng.github.io/2023/04/01/linux/lnmp%20build/05.http%E5%8D%8F%E8%AE%AE/01.%20http%E5%8D%8F%E8%AE%AE/</link>
            <category>http</category>
            <pubDate>Sat, 01 Apr 2023 16:46:15 +0800</pubDate>
            <description><![CDATA[ &lt;h1 id=&#34;http协议介绍&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#http协议介绍&#34;&gt;#&lt;/a&gt; http 协议介绍&lt;/h1&gt;
&lt;p&gt;HTTP 全称：Hyper Text Transfer Protocol 中文名：超文本传输协议&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;什么是超文本？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;包含有超链接 (Link) 和各种多媒体元素标记 (Markup) 的文本。这些超文本文件彼此链接，形成网状 (Web)，因此又被称为网页 (Web Page)。这些链接使用 URL 表示。最常见的超文本格式是超文本标记语言 HTML。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;什么是 URL？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;URL 即统一资源定位符 (Uniform Resource Locator)，用来唯一地标识万维网中的某一个文档。 URL 由协议、主机和端口 (默认为 80) 以及文件名三部分构成:&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_sre/%E6%88%AA%E5%B1%8F2022-12-07%2020.23.17.png&#34; alt=&#34;截屏2022-12-07 20.23.17&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;什么是超文本传输协议？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;是一种按照 URL 指示，将超文本文档从一台主机 (Web 服务器) 传输到另一台主机 (浏览器) 的应用层协议，以实现超链接的功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;http工作原理&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#http工作原理&#34;&gt;#&lt;/a&gt; http 工作原理&lt;/h2&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_sre/1168165-20190510101324052-778390150.png&#34; alt=&#34;1168165-20190510101324052-778390150&#34;&gt;&lt;/p&gt;
&lt;p&gt;1. 首先，当你在浏览器中输入一个网址的时候（&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly93d3cuYmFpZHUuY29t&#34;&gt;https://www.baidu.com&lt;/span&gt;）浏览器会帮你分析，你输入的这个 URL&lt;/p&gt;
&lt;p&gt;2. 其次，浏览器会向 DNS 服务器请求解析，&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3huLS1VUkx3d3ctZHc3aTY0MWJxbGlvMzNmN2U2Yi5iYWlkdS5jb20=&#34;&gt;该 URL 中的域名 www.baidu.com&lt;/span&gt;, 解析出百度服务器所在的 IP 地址&lt;/p&gt;
&lt;p&gt;3.DNS 服务器，会将解析出来的 IP 地址 110.111.112.113 并返回给浏览器。&lt;/p&gt;
&lt;p&gt;4. 浏览器接收到 DNS 返回的 IP 地址，立即与该 IP 所在的服务器建立 TCP 连接（80 端口）。&lt;/p&gt;
&lt;p&gt;5. 浏览器请求文档，也就是咱们常说的 html 页面，GET /index.html，并发出 HTTP 请求报文。&lt;/p&gt;
&lt;p&gt;6. 服务器给出响应，将请求的 index.html 文档返回给浏览器，也就是响应 HTTP 请求的报文。&lt;/p&gt;
&lt;p&gt;7.TCP 连接响应完之后，释放 TCP 连接。&lt;/p&gt;
&lt;p&gt;8. 最后就能显示出，你请求的这个页面了&lt;/p&gt;
&lt;h2 id=&#34;http请求方法&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#http请求方法&#34;&gt;#&lt;/a&gt; http 请求方法&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;请求头信息&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在 HTTP 请求报文中的方法 (Method)，是对所请求对象所进行的操作，也就是一些命令。请求报文中的操作有：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;方法 (Method)&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;GET&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求读取一个 Web 页面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;POST&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;明文提交数据，读取页面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;DELETE&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;调用后的接口删除功能的页面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;CONNECT&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;用于代理服务器&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;HEAD&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求读取一个 Web 页面的头部&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;PUT&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;调用后端，储存、上传功能页面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;TRACE&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;用于测试，要求服务器送回收到的请求&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;OPTION&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;查询特定选项&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;POST&lt;/code&gt;  请求向指定的资源提交要被处理的数据&lt;/p&gt;
&lt;h2 id=&#34;http响应方法&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#http响应方法&#34;&gt;#&lt;/a&gt; http 响应方法&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;响应报文中的状态码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;状态码（status-code）是响应报文状态行中包含的一个 3 位数字，指明特定的请求是否被满足，如果没有满足，原因是什么。状态码分为以下五类：&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220528213523553.png&#34; alt=&#34;image-20220528213523553&#34;&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;状态码&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;含义&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;200&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;成功&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;301&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;永久重定向（跳转）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;302&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;临时重定向（跳转）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;304&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;本地缓存&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;307&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;内部重定向（跳转）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;400&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户端错误&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;401&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;认证失败&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;403&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;找不到主页，权限不足&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;404&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;找不到页面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;500&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;内部错误&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;502&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;找不到后端主机（哪台服务器日志出现，就查哪台机器）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;503&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;服务器过载&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;504&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;后端主机超时&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;头部信息&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&#34;text-align:center&#34;&gt;头（header）&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;类型&lt;/th&gt;
&lt;th style=&#34;text-align:center&#34;&gt;说明&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;User-Agent&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;关于浏览器和他平台的信息，如 Mozilla5.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Accept&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户能处理的页面的类型，如 text-html&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Accept-Charset&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户可以接受的字符集，如 Uni’code-1-1&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Accept-Encoding&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户能处理的页面编码方法，如 gzip&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Accept-Language&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;客户能处理的自然预言，如 en，zh-cn&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Host&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;服务器的 DNS 名称，从 URL 中提取出来，必需&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Referer&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;用户从该 URL 代表的页面出发访问当前请求的页面&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Cookie&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;请求&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;将以前设置的 Cookie 送回服务器，可用来作为会话信息&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Date&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;双向&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;消息被发送时的日期和时间&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Server&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;关于服务器的信息，如 Microsoft-IIS/6.0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Content-Encoding&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;内容似乎如何被编码的，如 gzip&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Content-Language&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;页面所使用的自然语言&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Content-Length&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;以字节计算的页面长度&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Content-Type&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;页面的 MIME 类型&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Last-Modified&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;页面最后被修改的时间和日期，在页面缓存机制中意义重大&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Location&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;指示客户将请求发送给别处，即重定向到另一个 URL&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&#34;text-align:center&#34;&gt;Set-Cookie&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;响应&lt;/td&gt;
&lt;td style=&#34;text-align:center&#34;&gt;服务器希望客户保存一个 Cookie&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;User-Agent&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;User-Agent：浏览器标识（操作系统标识；加密等级标识；浏览器语言）渲染引擎标识 版本信息&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Server&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Server：响应头包含处理请求的原始服务器的软件信息&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Referer&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Referer：浏览器向 WEB 服务器表明自己是从哪个 网页 / URL 获得 / 点击 当前请求中的网址 / URL&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP 重定向&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Location：WEB 服务器告诉浏览器，试图访问的对象已经被移到别的位置了，到该头部指定的位置去取&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP 访问流程图&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220528223732645.png&#34; alt=&#34;image-20220528223732645&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220528223102817.png&#34; alt=&#34;image-20220528223102817&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;HTTP 协议原理总结&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#在浏览器中输入http://blog.driverzeng.com &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;1.浏览器向&lt;span class=&#34;built_in&#34;&gt;local&lt;/span&gt; DNS发起域名解析请求，本地DNS（/etc/hosts）文件中没有 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2.浏览器向DNS根域服务器发起请求，解析域名blog.driverzeng.com &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3.DNS进行递归查询和迭代查询： &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	客户端向服务端发起查询 -&amp;gt; 递归查询 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	服务端向服务端发起查询 -&amp;gt; 迭代查询 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	.com根域服务器发起查询 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	.com根域服务器 -&amp;gt; .driverzeng.com &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	.driverzeng.com -&amp;gt; blog.driverzeng.com A记录 39.104.203.184 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	将A记录：39.104.203.184返回给浏览器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4.浏览器和39.104.203.184所在服务器的80端口建立TCP/IP连接 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	防火墙的规则不允许你的IP地址访问该服务器的80端口，则拒绝连接，报错返回给用户 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	防火墙的规则允许你的IP地址访问该服务器的80端口，则放行 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	-建立连接（TCP/IP 三次握手） syn（建立连接信号） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	客户端 ---------------------&amp;gt; 服务端 syn+ack(我收到建立连接的请求了) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	服务端 ---------------------&amp;gt; 客户端 ack(告诉服务端，我知道你收到建立连接的请求了) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	客户端 ---------------------&amp;gt; 服务端 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5.向服务端的web服务发起http请求（负载均衡） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	-请求头部信息 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	1）请求的方法是什么: GET获取 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	2）请求的Host主机是: blog.driverzeng.com &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	3）请求的资源是什么: /index.html &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	4）请求的端口是什么: 默认http是80 https是443 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	5）请求携带的参数是什么: 属性（请求类型、压缩、认证、浏览器信息、等等） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	6）请求最后的空行 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6.将请求根据调度算法（rr 轮询）将请求下发给后端的web服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7.读取web服务器上的nginx配置文件，找到站点目录 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8.找到对应的代码文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 静态请求：web服务器将静态求情下发到共享存储服务器上，找到对应的静态资源返回给用户 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 动态请求：&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		1）将请求发送给后端代码，处理 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		2）先找数据库的缓存（Redis，memcache） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		3）如果缓存中有数据，则直接将数据返回给用户 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		4）如果缓存没有数据，则找后端数据库 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		5）从数据库中取出数据后，先存入缓存一份，然后在返回给用户&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9.返回对应的状态码和响应头部信息给浏览器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10.断开TCP/IP连接&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	-四次挥手&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11.浏览器展示网站页面&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;cdn&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#cdn&#34;&gt;#&lt;/a&gt; CDN&lt;/h2&gt;
&lt;p&gt;CDN：分布式静态缓存服务器&lt;/p&gt;
&lt;p&gt;静态资源：html,css,js,mp3,mp4,avi,jpg.png…&lt;/p&gt;
&lt;p&gt;1. 提升了网站访问速度&lt;/p&gt;
&lt;p&gt;2. 减少后端服务器的压力&lt;/p&gt;
&lt;h2 id=&#34;http相关术语&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#http相关术语&#34;&gt;#&lt;/a&gt; HTTP 相关术语&lt;/h2&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;PV：独立页面浏览量（一条日志，一个请求） &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;UV：独立设备 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;IP：独立的IP地址&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;假设公司有一座大厦，大厦有100人，每个人有一台电脑和一部手机，上网都是通过nat转换出口，每个人点击网站2次, 请 问对应的pv,uv,ip分别是多少？&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;pv：100 * 2 * 2 = 400 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;uv：100 * 2 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;IP：1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;soa松耦合架构&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#soa松耦合架构&#34;&gt;#&lt;/a&gt; SOA 松耦合架构&lt;/h2&gt;
&lt;p&gt;开发网站为了解耦，做出 SOA 架构&lt;/p&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/image-20220529001030555.png&#34; alt=&#34;image-20220529001030555&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;#一个电商公司，他的网站页面功能会有很多&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;注册&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;登录&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;首页&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;详情页&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;购物车&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;价格标签&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;留言&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;客服&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;支付中心&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;物流&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;仓储信息&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;订单相信&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;图片&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;http及架构请求访问流程&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#http及架构请求访问流程&#34;&gt;#&lt;/a&gt; HTTP 及架构请求访问流程&lt;/h2&gt;
&lt;p&gt;&lt;img data-src=&#34;https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_sre/image-20220512193446428.png&#34; alt=&#34;image-20220512193446428&#34;&gt;&lt;/p&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;42&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;comment&#34;&gt;# 在浏览器中输入http://blog.driverzeng.com&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;1.浏览器向&lt;span class=&#34;built_in&#34;&gt;local&lt;/span&gt; DNS发起域名解析请求，本地DNS(/etc/hosts)文件中没有 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2.浏览器向DNS根域服务器发起请求，解析域名blog.driverzeng.com&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3.DNS进行递归查询和迭代查询:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	客户端向服务端发起查询 - &amp;gt; 递归查询 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	服务端向服务端发起查询 - &amp;gt; 迭代查询&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	.com根域服务器发起查询&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	.com根域服务器 -&amp;gt; .driverzeng.com&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	.driverzeng.com -&amp;gt; blog.driverzeng.com A记录 39.104.203.184 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	将 A记录:39.104.203.184返回给浏览器&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4.浏览器和39.104.203.184所在服务器的80端口建立TCP/IP连接 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	防火墙的规则不允许你的IP地址访问该服务器的80端口，则拒绝连接，报错返回给用户 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	防火墙的规则允许你的IP地址访问该服务器的80端口，则放行&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		- 建立连接(TCP/IP 三次握手) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;				syn(建立连接信号)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		客户端 ---------------------&amp;gt; 服务端 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			syn+ack(我收到建立连接的请求了) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		服务端 ---------------------&amp;gt; 客户端&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;			ack(告诉服务端，我知道你收到建立连接的请求了) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  	客户端 ---------------------&amp;gt; 服务端&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5.向服务端的web服务发起http请求(负载均衡) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 请求头部信息&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	1)请求的方法是什么：GET获取&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	2)请求的Host主机是：blog.driverzeng.com&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	3)请求的资源是什么：/index.html&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	4)请求的端端口是什么：默认http是80 https是443&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	5)请求携带的参数是什么：属性(请求类型、压缩、认证、浏览器信息、等等)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	6)请求最后的空行&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6.将请求根据调度算法(rr 轮询)将请求下发给后端的web服务器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7.读取web服务器上的nginx配置文件，找到站点目录 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8.找到对应的代码文件&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 静态请求:web服务器将静态求情下发到共享存储服务器上，找到对应的静态资源返回给用户&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 动态请求:&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		1)将请求发送给后端代码，处理 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		2)先找数据库的缓存(Redis，memcache) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		3)如果缓存中有数据，则直接将数据返回给用户 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		4)如果缓存没有数据，则找后端数据库 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;		5)从数据库中取出数据后，先存入缓存一份，然后在返回给用户&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9.返回对应的状态码和响应头部信息给浏览器 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10.断开TCP/IP连接&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;	- 四次挥手 &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11.浏览器展示网站页面&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&#34;简单理解cdn&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#简单理解cdn&#34;&gt;#&lt;/a&gt; 简单理解 CDN&lt;/h2&gt;
&lt;p&gt;CDN: 分布式静态缓存服务器&lt;/p&gt;
&lt;p&gt;静态资源:html,css,js,mp3,mp4,avi,jpg.png…&lt;/p&gt;
&lt;p&gt;1. 提升了网站访问速度&lt;/p&gt;
&lt;p&gt;2. 减少后端服务器的压力&lt;/p&gt;
 ]]></description>
        </item>
    </channel>
</rss>
