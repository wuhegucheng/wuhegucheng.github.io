{
    "version": "https://jsonfeed.org/version/1",
    "title": "今天也请继续加油 • All posts by \"用户组\" tag",
    "description": "",
    "home_page_url": "http://wuhegucheng.github.io",
    "items": [
        {
            "id": "http://wuhegucheng.github.io/2023/04/01/linux/base/08.%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/04.%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%862/",
            "url": "http://wuhegucheng.github.io/2023/04/01/linux/base/08.%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/04.%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%862/",
            "title": "用户组管理2",
            "date_published": "2023-04-01T08:46:15.000Z",
            "content_html": "<h1 id=\"用户组管理\"><a class=\"markdownIt-Anchor\" href=\"#用户组管理\">#</a> 用户组管理</h1>\n<blockquote>\n<p>什么是 <code>sudo</code> ？</p>\n<ul>\n<li><code>sudo</code>  就是普通用户可以提权，执行 root 用户可以执行的命令</li>\n</ul>\n<p>为什么要用到 <code>sudo</code> ？</p>\n<ul>\n<li>如果在公司中，入职后，领导给运维的用户时普通用户，但是有些命令只能 root 执行</li>\n</ul>\n</blockquote>\n<h3 id=\"sudo如何使用\"><a class=\"markdownIt-Anchor\" href=\"#sudo如何使用\">#</a>  <code>sudo</code>  如何使用</h3>\n<ul>\n<li>\n<p>1. 系统的超级管理员（root）需要做 <code>sudo</code>  的配置（发一个兵符给指定的普通用户）</p>\n</li>\n<li>\n<p>2. 普通用户只需要在，执行的命令之前，加上 <code>sudo</code>  即可</p>\n</li>\n</ul>\n<p>配置文件 <code>/etc/sudoers</code></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">99</span> <span class=\"token comment\">## Allow root to run any commands anywhere </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">100</span> root\t<span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tALL</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">1</span>.用户名</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">2</span>.主机名</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">3</span>.角色名</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">4</span>.命令名</pre></td></tr></table></figure><h3 id=\"编辑权限visudo\"><a class=\"markdownIt-Anchor\" href=\"#编辑权限visudo\">#</a> 编辑权限 <code>visudo</code></h3>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">选项</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">-c</td>\n<td style=\"text-align:center\">检查语法</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#python 用户提权</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>python\t<span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tALL</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># sudo passwd roger1</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>sudo<span class=\"token punctuation\">]</span> password <span class=\"token keyword\">for</span> python:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#普通用户无需输入密码</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>python\t<span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tNOPASSWD:ALL</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">#主机别名</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Host_Alias    FILESERVERS <span class=\"token operator\">=</span> fs1, fs2</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>python\t<span class=\"token assign-left variable\">FILESERVERS</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tNOPASSWD:ALL</pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#角色别名</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>Cmnd_Alias SOFTWARE <span class=\"token operator\">=</span> /bin/rpm, /usr/bin/up2date, /usr/bin/yum</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>python\t<span class=\"token assign-left variable\">FILESERVERS</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tNOPASSWD:Cmnd_Alias SOFTWARE</pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>Cmnd_Alias SOFTWARE <span class=\"token operator\">=</span> ！/bin/rpm, <span class=\"token operator\">!</span>/usr/bin/up2date</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>python\t<span class=\"token assign-left variable\">FILESERVERS</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tNOPASSWD:Cmnd_Alias SOFTWARE</pre></td></tr><tr><td data-num=\"18\"></td><td><pre></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\">#用户组提权</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>%wheel\t<span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tALL</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>%wheel\t<span class=\"token assign-left variable\">ALL</span><span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>ALL<span class=\"token punctuation\">)</span>\tNOPASSWD:ALL</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\">#主要用 usermod 给用户提权，把用户加到有权限的组里</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token function\">usermod</span> 用户名 <span class=\"token parameter variable\">-G</span> 提权组</pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">#报错 </span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># sudo ll </span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>sudo: ll: <span class=\"token builtin class-name\">command</span> not found </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>原因：ll是别名，不是系统命令，sudo不走别名，只认识系统命令</pre></td></tr></table></figure><h3 id=\"vardbsudo\"><a class=\"markdownIt-Anchor\" href=\"#vardbsudo\">#</a> /var/db/sudo</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#密码过期文件</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>/var/db/sudo/lectured</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>通过Atime检验是否过期</pre></td></tr></table></figure><h3 id=\"sudo执行流程\"><a class=\"markdownIt-Anchor\" href=\"#sudo执行流程\">#</a>  <code>sudo</code>  执行流程</h3>\n<p><img data-src=\"https://roger-hub.oss-cn-shanghai.aliyuncs.com/img_devops/15613875305374.jpg\" alt=\"15613875305374\"></p>\n<h4 id=\"总结\"><a class=\"markdownIt-Anchor\" href=\"#总结\">#</a> 总结</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>.会修改visudo，添加用户提权 </pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">2</span>.给用户免密执行sudo的权限 </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token number\">3</span>.自定义用户的可执行命令，和不可执行命令 </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">4</span>.给组分配提权的权限 </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">5</span>.提权不用修改visudo，只需要加入wheel组，即可</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>注意：除非企业中有要求，哪些命令需要用，哪些不能使用</pre></td></tr></table></figure>",
            "tags": [
                "sudo",
                "用户组"
            ]
        },
        {
            "id": "http://wuhegucheng.github.io/2023/04/01/linux/base/08.%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/03.%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%861/",
            "url": "http://wuhegucheng.github.io/2023/04/01/linux/base/08.%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86/03.%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%861/",
            "title": "用户组管理1",
            "date_published": "2023-04-01T08:46:15.000Z",
            "content_html": "<h1 id=\"用户组管理\"><a class=\"markdownIt-Anchor\" href=\"#用户组管理\">#</a> 用户组管理</h1>\n<h2 id=\"随机密码生成\"><a class=\"markdownIt-Anchor\" href=\"#随机密码生成\">#</a> 随机密码生成</h2>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#md5 加密算法</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># echo 123 | md5sum</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># vim test.txt</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># md5sum test.txt > /tmp/md5.txt</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># md5sum -c /tmp/md5.txt</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>test.txt: OK</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ps:只要文件篡改就检验失败</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>date：查看当前系统时间</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token function\">date</span> +%F-%T：2022-04-09-14:25:13</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token function\">date</span> +%F<span class=\"token string\">\" \"</span>%T：2022-04-09 <span class=\"token number\">14</span>:25:30</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token function\">date</span> +%F-%T <span class=\"token operator\">|</span> md5sum</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#修改当前系统时间格式</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token function\">date</span> <span class=\"token parameter variable\">-s</span> <span class=\"token string\">\"2022/4/9 14:34:00\"</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\">#格式化时间</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token function\">date</span> +%Y-%m-%d</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>%Y：年</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>%m：月</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>%d：日</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>%H：时</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>%M：分</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>%S：秒</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>%F：年月日</pre></td></tr><tr><td data-num=\"25\"></td><td><pre>%T：时分秒</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token comment\">#随机密码 mkpasswd</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>-l：长度</pre></td></tr><tr><td data-num=\"29\"></td><td><pre>-d：数字</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>-c：小写字母</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>-C：大写字母</pre></td></tr><tr><td data-num=\"32\"></td><td><pre>-s：特殊符号</pre></td></tr></table></figure><h2 id=\"用户组管理-2\"><a class=\"markdownIt-Anchor\" href=\"#用户组管理-2\">#</a> 用户组管理</h2>\n<h4 id=\"etcgroup\"><a class=\"markdownIt-Anchor\" href=\"#etcgroup\">#</a> /etc/group</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/group </span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>root:x:0: </pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">1</span>.组名字 </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">2</span>.组密码占位符 </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">3</span>.GID </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">4</span>.显示该组的附加成员</pre></td></tr></table></figure><h4 id=\"etcgshadow\"><a class=\"markdownIt-Anchor\" href=\"#etcgshadow\">#</a> /etc/gshadow</h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># cat /etc/gshadow</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>root:::roger01</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token number\">1</span>.组名字 </pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">2</span>.组密码（空和<span class=\"token operator\">!</span>是没有密码） </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token number\">3</span>.组管理员 </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token number\">4</span>.显示该组的附加成员</pre></td></tr></table></figure><h4 id=\"创建组groupadd\"><a class=\"markdownIt-Anchor\" href=\"#创建组groupadd\">#</a> 创建组 <code>groupadd</code></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">选项</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">-g</td>\n<td style=\"text-align:center\">指定组的 gid</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-r</td>\n<td style=\"text-align:center\">指定 gid 范围 201-999 之间的系统组</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">groupadd</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#语法</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">groupadd</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span> 组名</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#示例</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd workpress01</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd workpress02 -g 10000  </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># tail -1 /etc/group</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>workpress02:x:10000:</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd workpress03 -r</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># tail -1 /etc/group</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>workpress03:x:996:</pre></td></tr></table></figure><h4 id=\"删除组groupdel\"><a class=\"markdownIt-Anchor\" href=\"#删除组groupdel\">#</a> 删除组 <code>groupdel</code></h4>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">groupdel</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#语法</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">groupdel</span> 组名</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#示例</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupdel workpress01</span></pre></td></tr></table></figure><h4 id=\"修改组groupmod\"><a class=\"markdownIt-Anchor\" href=\"#修改组groupmod\">#</a> 修改组 <code>groupmod</code></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">选项</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">-g</td>\n<td style=\"text-align:center\">修改组的 gid</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">-n</td>\n<td style=\"text-align:center\">修改组名字</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">groupmod</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#语法</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">groupmod</span> <span class=\"token punctuation\">[</span>options<span class=\"token punctuation\">]</span> 组名</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#示例</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupmod -g 10002 workpress02</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># tail -1 /etc/group</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>workpress02:x:10002:</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupmod workpress02 -n workpress03</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># tail -1 /etc/group</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>workpress03:x:10002:</pre></td></tr></table></figure><p>修改组密码（了解）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">[</span>root@zls ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># groupadd devops</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@zls ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># gpasswd devops</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Changing the password <span class=\"token keyword\">for</span> group devops</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>New Password:</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Re-enter new password:</pre></td></tr></table></figure><p>切换基本组身份（了解）</p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#检查账户信息</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">[</span>root@docker ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># useradd zls</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">[</span>root@docker ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># id zls</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token assign-left variable\">uid</span><span class=\"token operator\">=</span><span class=\"token number\">1069</span><span class=\"token punctuation\">(</span>zls<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">gid</span><span class=\"token operator\">=</span><span class=\"token number\">5005</span><span class=\"token punctuation\">(</span>zls<span class=\"token punctuation\">)</span> <span class=\"token assign-left variable\">groups</span><span class=\"token operator\">=</span><span class=\"token number\">5005</span><span class=\"token punctuation\">(</span>zls<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre> </pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#切换普通用户</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">[</span>root@docker ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># su - zls</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre> </pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">#创建新文件，并验证权限</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span>zls@docker ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">touch</span> file_roots</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">[</span>zls@docker ~<span class=\"token punctuation\">]</span>$ ll</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>-rw-rw-r-- <span class=\"token number\">1</span> zls zls <span class=\"token number\">0</span> Jun <span class=\"token number\">13</span> <span class=\"token number\">10</span>:06 file_roots</pre></td></tr><tr><td data-num=\"13\"></td><td><pre> </pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#切换组信息</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">[</span>zls@docker ~<span class=\"token punctuation\">]</span>$ newgrp devops</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>Password:</pre></td></tr><tr><td data-num=\"17\"></td><td><pre> </pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#建立文件，检查权限</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">[</span>zls@docker ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">touch</span> file_test</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">[</span>zls@docker ~<span class=\"token punctuation\">]</span>$ ll</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>total <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>-rw-rw-r-- <span class=\"token number\">1</span> zls zls <span class=\"token number\">0</span> Jun <span class=\"token number\">13</span> <span class=\"token number\">10</span>:06 file_roots</pre></td></tr><tr><td data-num=\"23\"></td><td><pre>-rw-r--r-- <span class=\"token number\">1</span> zls devops     <span class=\"token number\">0</span> Jun <span class=\"token number\">13</span> <span class=\"token number\">10</span>:08 file_test</pre></td></tr></table></figure><h2 id=\"用户身份切换\"><a class=\"markdownIt-Anchor\" href=\"#用户身份切换\">#</a> 用户身份切换</h2>\n<p>Linux 系统中，有时候普通用户有些事情是没办法操作，除非是 root 管理员用户才能做到。这时就需要临时切换到 root 管理员身份来做事了。那么在学习如何切换用户之前，我们先来了解下用户工作环境</p>\n<blockquote>\n<p>如何在普通用户的情况下，完成日常工作？</p>\n<p>su 切换用户，使用普通用户登录，然后使用 su 命令切换到 root</p>\n<ul>\n<li>\n<p>优点：简单，方便</p>\n</li>\n<li>\n<p>缺点：需要知道 root 密码，不安全，切换到 root 没有日志审计功能</p>\n</li>\n</ul>\n<p>sudo 提权，当需要使用 root 权限时，进行提权，而无需切换至 root 用户</p>\n<ul>\n<li>优点：安全，方便</li>\n<li>缺点：复杂</li>\n</ul>\n</blockquote>\n<h4 id=\"切换用户su\"><a class=\"markdownIt-Anchor\" href=\"#切换用户su\">#</a> 切换用户 <code>su</code></h4>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">选项</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">-c</td>\n<td style=\"text-align:center\">不切换用户，以该用户身份执行</td>\n</tr>\n</tbody>\n</table>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">su</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#语法</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">su</span> - 用户名</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#示例</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">#不加用户名默认切换 root 用户</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># su - </span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># su - root -c \"mkdir /root/python\"</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">[</span>root@localhost ~<span class=\"token punctuation\">]</span><span class=\"token comment\"># su - root -c \"ls -l /root/python\"</span></pre></td></tr></table></figure><p><strong>shell 的种类</strong></p>\n<ul>\n<li>交互式 shell\n<ul>\n<li>等待用户输入执行的命令 (终端操作，需要不断提示)：passwd</li>\n</ul>\n</li>\n<li>非交互式 shell\n<ul>\n<li>执行 shell 脚本，脚本执行结束后 shell 自动退出：su - 用户</li>\n</ul>\n</li>\n<li>登录式 shell\n<ul>\n<li>需要输入用户名和密码，才可以登录</li>\n</ul>\n</li>\n<li>非登录式 shell\n<ul>\n<li>不需要输入用户名和密码，就可以登录</li>\n<li>只加载～/.bashrc、/etc/bashrc 、/etc/profile.d/*.sh</li>\n</ul>\n</li>\n</ul>\n<p><strong>系统环境变量文件</strong></p>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#局部环境变量</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>~/.bashrc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>~/.bash_profile</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\">#全局环境变量</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>/etc/profile：不能轻易修改</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>/etc/profile.d/*.sh：推荐在这里增加配置文件，更安全</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>/etc/bashrc：</pre></td></tr></table></figure><p><strong>环境变量加载顺序</strong></p>\n<ul>\n<li>/etc/profile</li>\n<li>/etc/profile.d/*.sh</li>\n<li>~/.bash_profile</li>\n<li>~/.bashrc</li>\n<li>/etc/bashrc</li>\n</ul>\n",
            "tags": [
                "用户组",
                "shell环境变量",
                "系统变量",
                "切换用户"
            ]
        }
    ]
}